#!/usr/bin/env php
<?php

/*
 * This file is part of the Manager Tools.
 *
 * (c) Luis Cordova <cordoval@gmail.com>
 *
 * This source file is subject to the MIT license that is bundled
 * with this source code in the file LICENSE.
 */

$vendorDir = __DIR__.'/../vendor';

$filename = $vendorDir.'/autoload.php';

if (!file_exists($filename)) {
    echo 'Cannot find the vendor directory, have you executed composer install command?';
    exit(1);
}

require_once $filename;

$process = new Symfony\Component\Process\Process('git --version', getcwd());
$process->run();

if (!$process->isSuccessful()) {
    throw new \RuntimeException('Git is required.');
}

$app = new ManagerTools\Application();
$app->add(new ManagerTools\Command\PullRequestCommand());
$app->add(new ManagerTools\Command\ReleaseCreateCommand());
$app->add(new ManagerTools\Command\ReleaseListCommand());
$app->add(new ManagerTools\Command\ReleaseRemoveCommand());
$app->add(new ManagerTools\Command\IssueListLabelsCommand());
$app->add(new ManagerTools\Command\IssueListMilestonesCommand());
$app->add(new ManagerTools\Command\LabelIssuesCommand());
$app->run();
